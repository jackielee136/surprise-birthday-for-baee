<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Countdown to 12/12 üéÇ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #ffdee9 0%, #b5fffc 100%);
      color: #222;
      overflow: hidden;
    }

    .container {
      width: 100%;
      max-width: 900px;
      padding: 20px;
      position: relative;
      z-index: 3;
    }

    .card {
      background: rgba(255, 255, 255, 0.92);
      border-radius: 24px;
      padding: 28px 22px 30px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
      text-align: center;
    }

    h1 {
      font-size: 28px;
      margin-bottom: 10px;
    }

    .subtitle {
      color: #666;
      font-size: 14px;
      margin-bottom: 18px;
    }

    /* COUNTDOWN */
    #countdown-section {
      margin-top: 10px;
    }

    .countdown {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      margin: 18px 0 10px;
    }

    .time-box {
      background: #fef3c7;
      padding: 10px 14px;
      border-radius: 16px;
      min-width: 70px;
    }

    .time-number {
      display: block;
      font-size: 22px;
      font-weight: 700;
    }

    .time-label {
      display: block;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: #a16207;
    }

    .note {
      font-size: 13px;
      color: #555;
      margin-top: 6px;
      line-height: 1.4;
    }

    /* CELEBRATION */
    #celebration-section {
      display: none;
      animation: fadeIn 1s ease-out forwards;
    }

    #celebration-title {
      font-size: 32px;
      margin-bottom: 8px;
    }

    #celebration-name {
      font-size: 18px;
      color: #ec4899;
      margin-bottom: 16px;
    }

    #message {
      font-size: 15px;
      line-height: 1.6;
      white-space: pre-line;
      margin-bottom: 20px;
      padding: 0 10px;
      min-height: 120px;
    }

    .photo img {
      max-width: 260px;
      width: 80%;
      border-radius: 20px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }

    /* FIREWORKS CANVAS */
    #fireworks-canvas {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
    }

    /* FLOATING PHOTOS */
    #floating-photos-container {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 2;
      overflow: visible;
    }

    .floating-photo {
      position: fixed;
      bottom: -160px;
      width: 120px;
      border-radius: 18px;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.25);
      opacity: 0;
      animation: floatUp 14s linear infinite;
      object-fit: cover;
    }

    @keyframes floatUp {
      0%   { transform: translateY(0) scale(0.85); opacity: 0; }
      10%  { opacity: 1; }
      60%  { opacity: 1; }
      100% { transform: translateY(-120vh) scale(1.08); opacity: 0; }
    }

    /* MUSIC BUTTON */
    .music-btn {
      position: fixed;
      right: 16px;
      bottom: 16px;
      z-index: 4;
      border: none;
      border-radius: 999px;
      padding: 10px 16px;
      font-size: 13px;
      background: rgba(236, 72, 153, 0.9);
      color: #fff;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.25);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .music-btn:hover {
      transform: translateY(-1px);
      opacity: 0.96;
    }
  </style>
</head>
<body>

<canvas id="fireworks-canvas"></canvas>
<div id="floating-photos-container"></div>

<button class="music-btn" id="music-toggle">üéµ B·∫≠t nh·∫°c</button>

<div class="container">
  <div class="card">
    <h1>Countdown to 12/12 üéÇ</h1>
    <p class="subtitle">Anh ƒëang ƒë·∫øm t·ª´ng gi√¢y ƒë·∫øn 00:00 ng√†y 12/12/2025 ‚Äì ng√†y ƒë·∫∑c bi·ªát c·ªßa em.</p>

    <!-- COUNTDOWN -->
    <section id="countdown-section">
      <p>Ch·ªâ c√≤n...</p>
      <div class="countdown">
        <div class="time-box">
          <span class="time-number" id="days">0</span>
          <span class="time-label">Ng√†y</span>
        </div>
        <div class="time-box">
          <span class="time-number" id="hours">0</span>
          <span class="time-label">Gi·ªù</span>
        </div>
        <div class="time-box">
          <span class="time-number" id="minutes">0</span>
          <span class="time-label">Ph√∫t</span>
        </div>
        <div class="time-box">
          <span class="time-number" id="seconds">0</span>
          <span class="time-label">Gi√¢y</span>
        </div>
      </div>
      <p class="note">ƒê·∫øm ng∆∞·ª£c ƒë·∫øn th·ªùi kh·∫Øc d√†nh ri√™ng cho em‚Ä¶ üíñ</p>
    </section>

    <!-- CELEBRATION -->
    <section id="celebration-section">
      <div id="celebration-title">HAPPY BIRTHDAY üéâ</div>
      <div id="celebration-name">G·ª≠i em ‚Äì c√¥ g√°i 12/12 c·ªßa anh</div>
      <div id="message"></div>

    
    </section>
  </div>
</div>

<!-- NH·∫†C -->
<audio id="bg-music" loop>
  <source src="music.mp3" type="audio/mpeg" />
</audio>

<script>
  //const targetDate = new Date(2025, 11, 12, 0, 0, 0);

  // üëâ TEST nhanh (10 gi√¢y): b·∫≠t d√≤ng n√†y
   const targetDate = new Date(Date.now() + 10000);

  const countdownSection = document.getElementById("countdown-section");
  const celebrationSection = document.getElementById("celebration-section");
  const messageEl = document.getElementById("message");

  const fullMessage = `Ch√∫c m·ª´ng sinh nh·∫≠t em.  

T·ª´ ng√†y em xu·∫•t hi·ªán, l·ªãch c·ªßa anh c√≥ th√™m m·ªôt m·ªëc r·∫•t quan tr·ªçng:
kh√¥ng ch·ªâ l√† ng√†y 12/12 tr√™n m√†n h√¨nh,
m√† l√† ng√†y m·ªôt ng∆∞·ªùi ƒë·∫∑c bi·ªát b∆∞·ªõc v√†o cu·ªôc ƒë·ªùi anh.

D√π l√† sinh nh·∫≠t ‚Äúƒë√∫ng ng√†y‚Äù hay ‚Äútr√™n gi·∫•y khai sinh‚Äù,
th√¨ v·ªõi anh, m·ªói kho·∫£nh kh·∫Øc ƒë∆∞·ª£c ·ªü b√™n em
ƒë·ªÅu l√† m·ªôt m√≥n qu√†.

Hy v·ªçng khi em m·ªü trang n√†y,
em s·∫Ω nh·ªõ r·∫±ng c√≥ m·ªôt ng∆∞·ªùi lu√¥n √¢m th·∫ßm ƒë·ª©ng sau,
tin em, th∆∞∆°ng em, v√† mong ƒë∆∞·ª£c ƒëi c√πng em th·∫≠t l√¢u. üíó`;

  let typeIndex = 0;
  let typeInterval;

  function startTypewriter() {
    messageEl.textContent = "";
    typeIndex = 0;
    clearInterval(typeInterval);

    typeInterval = setInterval(() => {
      if (typeIndex < fullMessage.length) {
        messageEl.textContent += fullMessage.charAt(typeIndex);
        typeIndex++;
      } else {
        clearInterval(typeInterval);
      }
    }, 40);
  }

  function updateCountdown() {
    const now = new Date().getTime();
    const distance = targetDate.getTime() - now;

    if (distance <= 0) {
      startCelebration();
      clearInterval(countdownInterval);
      return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    document.getElementById("days").textContent = days;
    document.getElementById("hours").textContent = hours;
    document.getElementById("minutes").textContent = minutes;
    document.getElementById("seconds").textContent = seconds;
  }

  function startCelebration() {
    countdownSection.style.display = "none";
    celebrationSection.style.display = "block";
    startFireworks();
    startFloatingPhotos();
    startTypewriter();
  }

  const countdownInterval = setInterval(updateCountdown, 1000);
  updateCountdown();

  // FIREWORKS
  const canvas = document.getElementById("fireworks-canvas");
  const ctx = canvas.getContext("2d");
  let particles = [];
  let fireworksRunning = false;

  function resizeCanvas() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }
  window.addEventListener("resize", resizeCanvas);
  resizeCanvas();

  function createFirework() {
    const x = Math.random() * canvas.width;
    const y = Math.random() * canvas.height * 0.6;
    const colors = ["#fde68a", "#fca5a5", "#f9a8d4", "#a5b4fc", "#6ee7b7"];

    const num = 40 + Math.floor(Math.random() * 20);
    for (let i = 0; i < num; i++) {
      const angle = (Math.PI * 2 * i) / num;
      const speed = 2 + Math.random() * 3;
      particles.push({
        x,
        y,
        vx: Math.cos(angle) * speed,
        vy: Math.sin(angle) * speed,
        alpha: 1,
        radius: 2 + Math.random() * 2,
        color: colors[Math.floor(Math.random() * colors.length)]
      });
    }
  }

  function updateFireworks() {
    if (!fireworksRunning) return;

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    particles.forEach((p, i) => {
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.03;
      p.alpha -= 0.015;

      if (p.alpha <= 0) {
        particles.splice(i, 1);
      } else {
        ctx.save();
        ctx.globalAlpha = p.alpha;
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
        ctx.fillStyle = p.color;
        ctx.fill();
        ctx.restore();
      }
    });

    requestAnimationFrame(updateFireworks);
  }

  function startFireworks() {
    fireworksRunning = true;
    setInterval(createFirework, 500);
    updateFireworks();
  }

  // FLOATING PHOTOS
  const floatingContainer = document.getElementById("floating-photos-container");

  const floatingImages = [
    "anh1.jpg",
    "anh2.jpg",
    "anh3.jpg",
    "anh4.jpg",
    "anh5.jpg",
    "anh6.jpg",
    "anh7.jpg",
    "anh8.jpg",
    "anh9.jpg",
    "anh10.jpg"
    "anh11.jpg",
    "anh12.jpg",
    "anh13.jpg",
    "anh14.jpg",
    "anh15.jpg",
    "anh16.jpg",
    "anh17.jpg",
    "anh18.jpg",
    "anh19.jpg",
    "anh20.jpg"
    "anh21.jpg",
    "anh22.jpg",
    "anh23.jpg",
    "anh24.jpg",
    "anh25.jpg",
    "anh26.jpg",
    "anh27.jpg",
    "anh28.jpg",
    "anh29.jpg",
    "anh30.jpg"
  ];

  function startFloatingPhotos() {
  floatingContainer.innerHTML = "";

  const MAX_VISIBLE = 14;      // t·ªëi ƒëa bao nhi√™u ·∫£nh bay c√πng l√∫c
  const LANES = 8;             // chia m√†n h√¨nh th√†nh 8 lane ngang
  const imgs = [...floatingImages];

  // N·∫øu nhi·ªÅu h∆°n MAX_VISIBLE th√¨ random ch·ªçn b·ªõt
  if (imgs.length > MAX_VISIBLE) {
    imgs.sort(() => Math.random() - 0.5);
  }
  const toShow = imgs.slice(0, Math.min(MAX_VISIBLE, imgs.length));

  const laneWidth = 90 / LANES;
  const laneCenters = Array.from({ length: LANES }, (_, i) =>
    5 + laneWidth * i + laneWidth / 2
  );

  toShow.forEach((src, index) => {
    const img = document.createElement("img");
    img.src = src;
    img.className = "floating-photo";

    // ch·ªçn lane theo v√≤ng tr√≤n: 0‚Üí1‚Üí2‚Üí...‚ÜíLANES-1‚Üí0‚Üí...
    const laneIndex = index % LANES;
    let center = laneCenters[laneIndex];

    // cho l·ªách nh·∫π ƒë·ªÉ tr√¥ng t·ª± nhi√™n
    const jitter = (Math.random() - 0.5) * laneWidth * 0.4;
    center = Math.min(95, Math.max(5, center + jitter));

    const delay = Math.random() * 5;
    const duration = 12 + Math.random() * 6;

    img.style.left = center + "%";
    img.style.animationDuration = duration + "s";
    img.style.animationDelay = delay + "s";

    floatingContainer.appendChild(img);
  });
}



  // MUSIC
  const music = document.getElementById("bg-music");
  const toggle = document.getElementById("music-toggle");
  let isPlaying = false;

  toggle.addEventListener("click", () => {
    if (!isPlaying) {
      music.play().then(() => {
        isPlaying = true;
        toggle.textContent = "‚è∏ T·∫Øt nh·∫°c";
      }).catch(() => {
        alert("Tr√¨nh duy·ªát ch·∫∑n autoplay, th·ª≠ b·∫•m l·∫°i nh√© ‚ù§Ô∏è");
      });
    } else {
      music.pause();
      isPlaying = false;
      toggle.textContent = "üéµ B·∫≠t nh·∫°c";
    }
  });
</script>

</body>
</html>
